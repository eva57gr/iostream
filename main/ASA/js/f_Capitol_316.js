var from = "";
$(document).ready(function () {
    // Initialize form variable
    from = $("#formDenShort").val();

    // Initial calculation
     f_Capitol_405_col4();
    // Attach event listener to all input fields initially present
    $("input:not([type='button']):not([readonly]):not([disabled])").on("change", function (e) {
        f_Capitol_405_col4();
    });

    // Use event delegation to handle dynamically added rows
    $(document).on("change", "input:not([type='button']):not([readonly]):not([disabled])", function (e) {
        f_Capitol_405_col4();
    });
});

function f_Capitol_405_col4() {
    // Variable declarations for each row in column 4
    var R001_C1 = $("#6_316_14770_001_1");
    var R001_C2 = $("#6_316_14770_001_2");
    var sum_R001_C1 = 0;
    var sum_R001_C2 = 0;

    var rowIDs = [
        "051", "040", "031", "112", "056", "070", "100", "124", "156", "196", "191", "208", "818", "756", "784",
        "233", "250", "268", "276", "300", "376", "380", "392", "398", "417", "428", "440", "499", "528",
        "616", "620", "826", "203", "642", "643", "688", "703", "705", "724", "840", "752", "762", "764",
        "788", "792", "795", "804", "348", "860", "036", "008", "012", "016", "660", "024", "020", "028",
        "530", "446", "032", "533", "004", "044", "050", "052", "048", "084", "204", "060", "068", "072",
        "076", "092", "096", "854", "108", "064", "548", "336", "862", "850", "626", "704", "266", "332",
        "328", "270", "288", "312", "320", "254", "324", "624", "292", "340", "308", "304", "316", "262",
        "212", "214", "180", "894", "732", "882", "716", "356", "360", "400", "368", "364", "372", "887",
        "132", "116", "120", "634", "404", "296", "170", "174", "178", "408", "188", "384", "192", "414",
        "418", "426", "430", "422", "434", "438", "442", "480", "478", "807", "450", "454", "458", "466",
        "462", "470", "504", "474", "584", "484", "508", "492", "798", "496", "500", "104", "516", "520",
        "524", "562", "566", "558", "570", "554", "540", "578", "830", "574", "512", "136", "184", "833",
        "654", "586", "585", "591", "598", "600", "604", "612", "630", "410", "638", "646", "222", "674",
        "678", "682", "748", "580", "690", "686", "666", "670", "659", "662", "694", "702", "760", "090",
        "706", "736", "740", "158", "834", "166", "796", "768", "772", "776", "780", "800", "876", "858",
        "234", "583", "242", "608", "246", "238", "258", "140", "744", "144", "218", "226", "232", "231",
        "710", "388", "896", "898", "152", "999", "352", "344"
    ];

    // Iterate over each row ID to compute the sum
    rowIDs.forEach(function (rowID) {
        var variable1 = $("#6_316_" + getMDID(rowID) + "_" + rowID + "_1");
        var value1 = parseInt(variable1.val()) || 0;
        sum_R001_C1 += value1;

        var variable2 = $("#6_316_" + getMDID(rowID) + "_" + rowID + "_2");
        var value2 = parseInt(variable2.val()) || 0;
        sum_R001_C2 += value2;
    });

    // Set R001 to be readonly
    R001_C1.prop("readonly", true);
    R001_C2.prop("readonly", true);
    // Update R001 with the computed sum
    R001_C1.val(sum_R001_C1 === 0 ? "" : sum_R001_C1);
    R001_C2.val(sum_R001_C2 === 0 ? "" : sum_R001_C2);
}


function getMDID(rowID) {
    var mdidMapping = {
        "001": "100011392",
        "072": "100011394",
        "002": "22546",
        "051": "100011395",
        "031": "100011396",
        "112": "100011397",
        "398": "100011398",
        "417": "100011399",
        "643": "100011400",
        "762": "100011401",
        "795": "100011402",
        "804": "100011403",
        "860": "100011404",
        "999": "100011405",
        "040": "100011406",
        "008": "100011407",
        "056": "100011408",
        "070": "100011409",
        "100": "100011410",
        "191": "100011411",
        "208": "100011412",
        "756": "100011413",
        "233": "100011414",
        "246": "100011415",
        "784": "11336",
        "250": "100011416",
        "268": "100011417",
        "276": "100011418",
        "300": "100011419",
        "372": "100011420",
        "380": "100011421",
        "428": "100011422",
        "440": "100011423",
        "442": "100011424",
        "499": "100011425",
        "578": "100011426",
        "528": "100011427",
        "616": "100011428",
        "620": "100011429",
        "826": "100011430",
        "203": "100011431",
        "642": "100011432",
        "688": "100011433",
        "703": "100011434",
        "705": "100011435",
        "724": "100011436",
        "752": "100011437",
        "348": "100011438",
        "007": "100011439",
        "807": "100011641",
        "792": "100011440",
        "376": "100011441",
        "156": "100011442",
        "392": "100011443",
        "006": "100011444",
        "124": "100011445",
        "840": "100011446",
        "021": "100011447",
        "013": "100011448",
        "005": "100011449",
        "002": "100011450",
        "009": "100011451",
        "368": "100012180",
        "364": "15069"
    };


    return mdidMapping[rowID] || "UNKNOWN_MDID";
}


